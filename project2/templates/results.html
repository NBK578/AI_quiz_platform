{% extends "base.html" %}
{% block title %}전체 결과{% endblock %}

{% block content %}
<div class="container mt-5">
  <h2 class="mb-4">전체 생성 및 채점 결과</h2>

  <div class="mb-3">
    <a href="{{ url_for('download_file') }}" class="btn btn-success">문제 파일 다운로드</a>
    <a href="{{ url_for('grade') }}" class="btn btn-primary">전체 채점 페이지로 이동</a>
    
    {# 추가: 쇼츠 만들기 버튼 #}
    <a href="{{ url_for('shorts') }}" class="btn btn-warning">🎬 쇼츠 관리</a>
  </div>

  <ul class="list-group">
    {% for q in questions %}
      <li class="list-group-item">
        <strong>문제 {{ loop.index }}:</strong> {{ q.question_data.question }}
        {% if q.page %}
          <br><small class="text-muted">출제 페이지: {{ q.page }} 페이지</small>
        {% endif %}
      </li>
    {% endfor %}
  </ul>

  {# 추가: 생성된 쇼츠 목록 표시 #}
  {% if session.get('shorts') %}
    <div class="mt-4">
      <h4>생성된 쇼츠 영상</h4>
      <ul class="list-group">
        {% for fname in session.shorts %}
          <li class="list-group-item">
            <a href="{{ url_for('static', filename='output/' ~ fname) }}" target="_blank">
              {{ fname }}
            </a>
          </li>
        {% endfor %}
      </ul>
    </div>
  {% endif %}
</div>
{% endblock %}
